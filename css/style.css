/* ==========================================================================
   SOMMAIRE
   1. BASE & LAYOUT ......... Configuration globale (Body, Container, Liens)
   2. UTILITAIRES ........... Classes de couleurs et aides visuelles
   3. NAVIGATION ............ Boutons de retour et mise à jour
   4. COMPOSANTS UI ......... Selects, Inputs, Boutons spécifiques
   5. HEADER SCRUTIN ........ En-tête de la page de détail
   6. FILTRES ............... Barre de filtres (Région, Dept...)
   7. GRAPHIQUES ............ Barres de progression et stats
   8. LISTE SCRUTINS ........ Cartes de la page d'accueil
   9. LISTE DÉPUTÉS ......... Grille et cartes des députés
   10. HÉMICYCLE ............ Vue SVG et Tooltips
   11. RESPONSIVE ........... Adaptations Mobile et Tablette
   12. PAGINATION ........... Boutons précédent/suivant
   ========================================================================== */

/* ==========================================================================
   1. BASE & LAYOUT
   ========================================================================== */
body { 
    font-family: 'Segoe UI', sans-serif; 
    background: #f0f2f5; 
    margin: 0; 
    padding: 20px; 
    color: #333;
}

.container { 
    max-width: 1200px; 
    margin: 0 auto; 
}

a { 
    text-decoration: none; 
    color: inherit; 
}

/* ==========================================================================
   2. UTILITAIRES (Couleurs & Badges)
   ========================================================================== */
.bg-green { background: #27ae60; } 
.bg-red { background: #c0392b; }

.p-pour { color: #27ae60; background: #eafaf1; }
.p-contre { color: #c0392b; background: #fdedec; }
.p-abs { color: #f39c12; background: #fef9e7; }

/* ==========================================================================
   3. NAVIGATION (Boutons Back/Update)
   ========================================================================== */
.btn-back, .btn-update {
    display: inline-block;
    padding: 8px 15px;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    color: #555;
    font-weight: bold;
    transition: 0.2s;
    text-decoration: none;
}

.btn-back:hover, .btn-update:hover {
    background: #eee;
    color: #333;
}

.btn-update {
    background: #3498db;
    color: white;
    border: none;
}
.btn-update:hover {
    background: #2980b9;
    color: white;
}

/* ==========================================================================
   4. COMPOSANTS UI (Selects, Inputs & Boutons)
   ========================================================================== */
/* Styles génériques pour les formulaires */
input[type="text"], select { 
    padding: 8px; 
    border: 1px solid #ccc; 
    border-radius: 4px; 
    background-color: #fff;
}

/* Select stylé (Header Scrutin) */
.header-select {
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background-color: #f8f9fa;
    font-size: 0.95rem;
    cursor: pointer;
    margin-bottom: 15px;
    font-weight: 600;
    color: #444;
    width: 100%;
    max-width: 450px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    transition: border-color 0.2s;
}
.header-select:hover { border-color: #bbb; }
.header-select:focus { outline: none; border-color: #3498db; }

/* Bouton "Pilule" */
.btn-toggle-chart {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 20px;
    text-decoration: none;
}
.btn-toggle-chart:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
    background: linear-gradient(135deg, #2980b9 0%, #3498db 100%);
}
.btn-toggle-chart:active { transform: translateY(1px); }

/* ==========================================================================
   5. HEADER SCRUTIN
   ========================================================================== */
.header-scrutin { 
    background: white; 
    padding: 30px; 
    border-radius: 10px; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
    margin-bottom: 30px; 
    text-align: center; 
}
.header-scrutin h1 { margin: 10px 0; font-size: 1.5rem; color: #2c3e50; }
.date-scrutin { color: #999; font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; }
.objet {display: none;  color: #7f8c8d; font-style: italic; margin-bottom: 20px; }
.header-separator { margin: 20px 0; border-top: 1px solid #eee; }

/* MODIFICATION ICI : align-items center pour aligner les boites entre elles */
.barre-resultat { 
    display: flex; 
    justify-content: center; 
    gap: 15px; 
    flex-wrap: wrap; 
    align-items: center; 
}

/* MODIFICATION ICI : Flexbox interne pour centrer le texte */
.stat-box { 
    padding: 8px 15px; 
    border-radius: 20px; 
    font-weight: bold; 
    font-size: 0.9rem; 
    background: #eee;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* MODIFICATION ICI : Flexbox interne pour centrer le texte */
.resultat-final { 
    padding: 7px 8px; 
    border-radius: 5px; 
    color: white; 
    font-weight: bold; 
    text-transform: uppercase;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

/* ==========================================================================
   6. FILTRES
   ========================================================================== */
/* Conteneur page d'accueil (index.php) */
.filters-container { 
    background: white; 
    padding: 20px; 
    border-radius: 8px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); 
    margin-bottom: 20px; 
}

.filters-row { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 15px; 
    align-items: center; 
    margin-bottom: 15px; 
}

.filters-row input[type="text"] { 
    flex-grow: 1; 
    min-width: 200px; 
}

/* Conteneur pages détails (scrutin/classement) */
.filters-bar {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    margin-bottom: 20px;
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    align-items: center;
}

.filters-bar select { flex-grow: 1; min-width: 140px; cursor: pointer; }
.filters-bar select:hover { border-color: #aaa; }

.count-badge { 
    margin-left: auto; 
    font-weight: bold; 
    color: #666; 
    background: #eee; 
    padding: 5px 10px; 
    border-radius: 20px; 
    font-size: 0.9em; 
}
#compteur-filtre { margin-left: auto; font-size: 0.9em; color: #666; font-weight: bold; }

/* ==========================================================================
   7. GRAPHIQUES
   ========================================================================== */
.chart-container {
    background: white; padding: 20px; border-radius: 8px; margin-bottom: 30px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid #eee;
    max-width: 800px; margin-left: auto; margin-right: auto;
}
.chart-title { margin: 0 0 15px 0; font-size: 1.1em; color: #555; border-bottom: 1px solid #eee; padding-bottom: 10px; text-align: center; }
.chart-row { display: flex; align-items: center; margin-bottom: 12px; font-size: 0.9em; }
.chart-label { width: 30%; max-width: 180px; text-align: right; padding-right: 15px; font-weight: bold; color: #444; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.chart-bar-area { flex-grow: 1; background: #f4f4f4; border-radius: 4px; height: 24px; position: relative; overflow: hidden; display: flex; }
.chart-bar-segment, .chart-bar-fill { height: 100%; width: 0%; transition: width 0.8s cubic-bezier(0.22, 1, 0.36, 1); }
.chart-bar-fill { border-radius: 4px; }
.bg-pour { background-color: #27ae60; }
.bg-contre { background-color: #c0392b; }
.bg-abstention { background-color: #f39c12; }
.chart-value { margin-left: 10px; font-weight: bold; width: 50px; text-align: left; color: #333; font-size: 0.85em; }

/* ==========================================================================
   8. LISTE SCRUTINS
   ========================================================================== */
.liste-scrutins { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; margin-top: 20px; }
.card-scrutin {
    display: flex; flex-direction: column; justify-content: space-between;
    background: #fff; border: 1px solid #eee; padding: 20px;
    text-decoration: none; color: #333; border-left: 5px solid #ddd;
    border-radius: 8px; height: 100%; box-sizing: border-box;
    transition: transform 0.2s, box-shadow 0.2s;
}
.card-scrutin:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
.card-adopte { border-left-color: #27ae60; }
.card-rejete { border-left-color: #c0392b; }
.card-scrutin h3 { margin-top: 0; margin-bottom: 10px; font-size: 1.1rem; color: #2c3e50; }
.card-scrutin .date { font-size: 0.85rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
.card-scrutin p { color: #555; line-height: 1.5; margin-bottom: 15px; }

/* ==========================================================================
   9. LISTE DÉPUTÉS
   ========================================================================== */
.bloc-groupe { background: white; padding: 20px; border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
.bloc-groupe h2 { margin-top: 0; font-size: 1.2rem; color: #333; display: flex; justify-content: space-between; }
.count { font-size: 0.8rem; color: #888; }
.votes-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; margin-top: 15px; }

.depute-card { background: #f9f9f9; border-radius: 8px; overflow: hidden; text-align: center; border: 1px solid #eee; transition: transform 0.2s; min-height: 200px; }
.depute-card:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
.img-wrapper { height: 120px; overflow: hidden; background: #ddd; }
.img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
.info { padding: 8px; }
.nom { font-size: 1rem; font-weight: bold; height: 39px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
.meta-info { margin-top: 4px; margin-bottom: 6px; display: flex; flex-direction: column; gap: 2px; }
.dept { font-size: 0.9rem; color: #666; font-weight: normal; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin: 2px 0; }
.siege { font-size: 0.75rem; color: #ffffff; background: #000; border-radius: 3px; padding: 1px 4px; display: inline-block; align-self: center; }
.badge-vote { font-size: 0.7rem; margin-top: 5px; text-transform: uppercase; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; }

.v-pour .badge-vote { color: #27ae60; background: #eafaf1; }
.v-pour { border-bottom: 3px solid #27ae60; }
.v-contre .badge-vote { color: #c0392b; background: #fdedec; }
.v-contre { border-bottom: 3px solid #c0392b; }
.v-abstention .badge-vote { color: #f39c12; background: #fef9e7; }
.v-abstention { border-bottom: 3px solid #f39c12; }

/* ==========================================================================
   10. HÉMICYCLE
   ========================================================================== */
#hemicycle-view { width: 100%; max-width: 900px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; justify-content: center; align-items: center; min-height: 500px; }
.seat { cursor: pointer; transition: r 0.2s, stroke 0.2s; }
.seat:hover { opacity: 0.8; }
.hemi-tooltip { position: absolute; display: none; background: white; border: 1px solid #ddd; box-shadow: 0 4px 15px rgba(0,0,0,0.2); padding: 10px; border-radius: 6px; z-index: 1000; pointer-events: none; min-width: 200px; }
.hemi-tip-content { display: flex; align-items: center; gap: 10px; }
.hemi-tip-content img { width: 50px; height: 60px; object-fit: cover; border-radius: 4px; background: #eee; }
.hemi-tip-content strong { color: #333; font-size: 0.95em; }
.hemi-tip-content span { color: #666; font-size: 0.8em; }

/* ==========================================================================
   11. RESPONSIVE
   ========================================================================== */
@media (max-width: 992px) {
    .liste-scrutins { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
    .filters-row { flex-direction: column; align-items: stretch; }
    .count-badge { margin-left: 0; text-align: center; margin-top: 10px; }
}

@media (max-width: 600px) {
    .liste-scrutins { grid-template-columns: 1fr; }
    .chart-label { width: 25%; font-size: 0.75em; padding-right: 8px; }
    .chart-value { font-size: 0.75em; width: 35px; margin-left: 5px; }
    .chart-container { padding: 10px; }
    .filters-bar { flex-direction: column; align-items: stretch; }
    .header-scrutin { padding: 15px; }
    .header-select { width: 100%; max-width: none; }
}

/* --- TABLEAUX RESPONSIVES --- */

/* 1. Conteneur de scroll (Permet de scroller juste le tableau avec le doigt) */
.table-responsive {
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch; /* Fluidité sur iOS */
}

/* 2. Optimisations Spécifiques Mobile pour le Classement */
@media (max-width: 600px) {
    /* Réduction des marges internes des cellules */
    .rank-table th, .rank-table td { 
        padding: 10px 5px; 
        font-size: 0.85em; 
    }
    
    /* Colonne rang plus étroite */
    .rank-num { 
        width: 30px; 
        font-size: 1em; 
    }

    /* Photo député plus petite */
    .avatar-mini {
        width: 32px; 
        height: 40px;
    }
    
    /* Rapprocher photo et nom */
    .depute-cell {
        gap: 8px; 
    }
    
    /* Éviter que la barre de progression ne casse la largeur */
    .rank-table td:last-child {
        min-width: 110px; /* Force une largeur min pour la barre */
    }
    
    .score-text {
        font-size: 0.9em;
    }
}
/* ==========================================================================
   12. PAGINATION
   ========================================================================== */
.pagination-bar { display: flex; justify-content: center; gap: 10px; margin: 30px 0; align-items: center; }
.btn-page { padding: 8px 15px; background: #fff; border: 1px solid #ddd; border-radius: 4px; text-decoration: none; color: #333; font-weight: bold; transition: 0.2s; }
.btn-page:hover { background: #eee; border-color: #bbb; }
.btn-page.disabled { opacity: 0.5; pointer-events: none; }