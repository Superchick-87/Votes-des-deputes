/* ==========================================================================
   SOMMAIRE
   1. BASE & LAYOUT ......... Configuration globale
   2. UTILITAIRES ........... Couleurs, badges, helpers (.hidden, .lbl)
   3. NAVIGATION ............ Boutons (.btn-*, .btn-action)
   4. COMPOSANTS UI ......... Selects, Inputs, Bouton Graphique (Pilule)
   5. HEADER SCRUTIN ........ En-tête détail
   6. FILTRES ............... Barres de filtres
   7. GRAPHIQUES ............ Styles barres (Texte intérieur)
   8. LISTE SCRUTINS ........ Cartes accueil
   9. LISTE DÉPUTÉS ......... Cartes députés
   10. HÉMICYCLE ............ SVG + TOOLBAR + TOOLTIPS (CORRIGÉ)
   11. RESPONSIVE ........... GESTION MOBILE (< 992px, < 768px)
   12. PAGINATION ...........
   13. TOOLTIP ..............
   14. FOOTER ...............
   15. STATS HEADER ......... Cartes résumé (Haut de page classement)
   16. MODULE COMPARATEUR ... Layout spécifique page comparateur
   17. RESPONSIVE COMPARATEUR Spécifique 645px et Mobile
   ========================================================================== */

/* ==========================================================================
   1. BASE & LAYOUT
   ========================================================================== */
body {
    font-family: 'Segoe UI', sans-serif;
    background: #f0f2f5;
    margin: 0;
    padding: 20px;
    color: #333;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
}

a {
    text-decoration: none;
    color: inherit;
}

/* ==========================================================================
   2. UTILITAIRES
   ========================================================================== */
.bg-green { background: #27ae60; }
.bg-red { background: #c0392b; }

.p-pour { color: #27ae60; background: #eafaf1; }
.p-contre { color: #c0392b; background: #fdedec; }
.p-abs { color: #727272; background: #fef9e7; }

.el-inactif { opacity: 0.4; }
.el-inactif img { filter: grayscale(100%); }

.hidden { display: none !important; }

.lbl {
    font-weight: bold; color: #7f8c8d; font-size: 0.9em; margin-right: 5px;
}

/* ==========================================================================
   3. NAVIGATION & BOUTONS
   ========================================================================== */
.btn-back, .btn-update {
    display: inline-block; padding: 8px 15px; background: #fff;
    border: 1px solid #ddd; border-radius: 4px; color: #555;
    font-weight: bold; transition: 0.2s;
}
.btn-back:hover, .btn-update:hover { background: #eee; color: #333; }
.btn-update { background: #3498db; color: white; border: none; }
.btn-update:hover { background: #2980b9; color: white; }

.btn-action {
    width: 32px; height: 32px; border-radius: 50%; border: none; cursor: pointer;
    display: flex; justify-content: center; align-items: center;
    font-size: 1.6em; line-height: 1; padding: 0 0 4px 0; margin: 0;
    color: white; font-family: Arial, sans-serif; font-weight: 300;
    transition: transform 0.2s;
}
.btn-action:hover { transform: scale(1.1); }

.btn-add { background: #27ae60; margin-left: 10px; }
.btn-remove { background: #e74c3c; transform: rotate(45deg); font-size: 1.6em; }
.btn-remove:hover { transform: rotate(45deg) scale(1.1); }
.btn-classement { background: #8e44ad; }
.btn-comparateur { background: #2980b9; }

/* ==========================================================================
   4. COMPOSANTS UI
   ========================================================================== */
input[type="text"], input[type="search"], input[type="number"], input[type="date"],
input[type="email"], input[type="password"], select, textarea {
    padding: 10px 12px; border: 1px solid #ccc; border-radius: 6px;
    background-color: #fff; font-size: 0.95rem; color: #333;
    outline: none; transition: border-color 0.2s, box-shadow 0.2s;
    font-family: inherit; margin: 0; box-sizing: border-box;
}
input:focus, select:focus, textarea:focus {
    border-color: #3498db; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1); outline: none;
}
option:disabled { color: #ccc; background: #f4f4f4; }

.leg-selector {
    padding: 8px 12px; font-size: 1rem; font-weight: bold; cursor: pointer;
    margin-top: 5px; border-width: 2px; margin: 10px auto;
}
.type-selector {
    color: #2c3e50; background-color: #f8f9fa; border: 2px solid #bdc3c7 !important;
}
select.dynamic-select { min-width: 180px; max-width: 250px; color: #2c3e50; }

.btn-toggle-chart {
    background: linear-gradient(135deg, #a7d9fa 0%, #96d4fd 100%);
    color: black; border: none; padding: 5px 15px; border-radius: 50px;
    font-size: 0.85rem; cursor: pointer; transition: all 0.3s ease;
    display: block; margin: 20px auto; width: fit-content;
    text-decoration: none; text-align: center;
}
.btn-toggle-chart:hover {
    color: rgb(255, 255, 255); transform: translateY(-2px);
    background: linear-gradient(135deg, #2980b9 0%, #3498db 100%);
}
.btn-toggle-chart:active { transform: translateY(1px); }

/* ==========================================================================
   5. HEADER SCRUTIN
   ========================================================================== */
.header-index { display: flex; flex-wrap: wrap; justify-content: flex-end; align-items: center; margin-bottom: 15px; }
.header-classement { width: 100%; margin: 10px 0 5px 0; }
.header-resum { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
h1 { text-align: center; margin: 10px auto 0; }

.header-scrutin {
    background: white; padding: 30px; border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); margin-bottom: 30px; text-align: center;
}
.header-scrutin h1 { margin: 10px 0; font-size: 1.5rem; color: #2c3e50; line-height: 1.2; }
.date-scrutin { color: #999; font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; }
.objet { display: none; }
.header-separator { margin: 10px 0; border-top: 1px solid #eee; }

.barre-resultat { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; align-items: center; }
.stat-box {
    padding: 8px 15px; border-radius: 20px; font-weight: bold;
    font-size: 0.9rem; background: #eee; display: flex;
    align-items: center; justify-content: center;
}
.resultat-final {
    padding: 7px 8px; border-radius: 5px; color: white;
    font-weight: bold; text-transform: uppercase; display: flex;
    align-items: center; justify-content: center; line-height: 1;
}
.label-lecture { font-weight: bold; color: #000000; font-size: 1.1em; margin: 4px 0; display: block; }
.label-lecture.definitive {
    font-style: normal; font-weight: bold; color: #fff;
    text-transform: uppercase; font-size: 0.9em;
    background-color: black; padding: 5px 7px 4px 7px; width: max-content;
}
.right-lecture { text-align: right; }

/* ==========================================================================
   6. FILTRES & GRID (GLOBAL)
   ========================================================================== */
.filters-container {
    background: white; padding: 20px; border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); margin-bottom: 20px;
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; align-items: center;
}
.search-full { grid-column: 1 / -1; width: 100%; }
.count-badge {
    grid-column: 1 / -1; justify-self: end; font-weight: bold;
    color: #666; background: #eee; padding: 5px 10px;
    border-radius: 20px; font-size: 0.9em; width: fit-content;
}
.filters-container select, .filters-container input { width: 100%; height: 42px; box-sizing: border-box; }

/* ==========================================================================
   7. GRAPHIQUES
   ========================================================================== */
.chart-container {
    background: white; padding: 20px; border-radius: 8px; margin-bottom: 30px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); border: 1px solid #eee;
    max-width: 900px; margin: 0 auto; display: block; opacity: 1; transition: opacity 0.3s;
}
.chart-title {
    margin: 0 0 20px 0; font-size: 1.1em; color: #555;
    border-bottom: 1px solid #eee; padding-bottom: 15px; text-align: center; font-weight: bold;
}
.chart-row { display: flex; align-items: center; margin-bottom: 12px; font-size: 0.9em; height: 25px; }
.chart-label {
    width: 35%; max-width: 250px; text-align: right; padding-right: 15px;
    font-weight: bold; color: #444; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.chart-bar-area { flex-grow: 1; background: #f4f4f4; border-radius: 4px; height: 100%; display: flex; overflow: hidden; }
.chart-bar-fill {
    height: 100%; width: 0%; transition: width 1s cubic-bezier(0.22, 1, 0.36, 1);
    border-radius: 4px; display: flex; align-items: center; justify-content: flex-start;
    padding-left: 10px; color: #2c3e50; font-weight: bold; font-size: 0.9em; white-space: nowrap;
}
.chart-bar-segment { height: 100%; transition: width 0.8s; }
.chart-value { margin-left: 10px; font-weight: bold; width: 40px; text-align: right; color: #333; font-size: 0.85em; }

.bg-pour { background-color: #27ae60; }
.bg-contre { background-color: #c0392b; }
.bg-abstention { background-color: #727272; }
.badge-count { font-size: 0.85em; background: #eee; color: #777; padding: 2px 6px; border-radius: 4px; margin-left: 5px; font-weight: normal; }

@media (max-width: 600px) {
    .chart-label { width: 30%; font-size: 0.75em; padding-right: 8px; }
    .chart-bar-fill { font-size: 0.75em; padding-left: 5px; }
}

/* ==========================================================================
   8. LISTE SCRUTINS
   ========================================================================== */
.title-card-scrutin { margin-bottom: 20px; }
.liste-scrutins { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; margin-top: 20px; }
.card-scrutin {
    display: flex; flex-direction: column; justify-content: space-between;
    background: #fff; border: 1px solid #eee; padding: 20px;
    text-decoration: none; color: #333; border-left: 5px solid #ddd;
    border-radius: 8px; height: 100%; box-sizing: border-box; transition: transform 0.2s, box-shadow 0.2s;
}
.card-scrutin:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); }
.card-adopte { border-left-color: #27ae60; }
.card-rejete { border-left-color: #c0392b; }
.card-scrutin h3 { margin-top: 0; margin-bottom: 10px; font-size: 1.1rem; color: #2c3e50; }
.card-scrutin .date { font-size: 0.85rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
.card-scrutin p { color: #555; line-height: 1.5; margin-bottom: 15px; }
.text-pour { color: #27ae60; font-weight: bold; }
.text-contre { color: #c0392b; font-weight: bold; }
.text-abstention { color: #888; font-weight: bold; }

/* ==========================================================================
   9. LISTE DÉPUTÉS
   ========================================================================== */
.bloc-groupe {
    background: white; padding: 20px; border-radius: 8px;
    margin-bottom: 30px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}
.bloc-groupe h2 { margin-top: 0; font-size: 1.2rem; color: #333; display: flex; justify-content: space-between; }
.count {
    display: inline-block; min-width: 24px; height: 24px; line-height: 24px;
    text-align: center; border-radius: 50px; font-size: 0.8rem; font-weight: bold;
    margin-left: 10px; padding: 1px 6px 0px 6px; vertical-align: middle; box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.votes-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; margin-top: 15px; }
.depute-card {
    cursor: pointer !important; background: #f9f9f9; border-radius: 8px;
    overflow: hidden; text-align: center; border: 1px solid #eee;
    transition: transform 0.2s; min-height: 200px;
}
.depute-card:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); }
.img-wrapper { height: 120px; overflow: hidden; background: #ddd; }
.img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
.info { padding: 8px; }
.nom { font-size: 1rem; font-weight: bold; height: 39px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
.meta-info { margin-top: 4px; margin-bottom: 6px; display: flex; flex-direction: column; gap: 2px; }
.dept { font-size: 0.9rem; color: #666; font-weight: normal; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin: 2px 0; }
.badge-vote { font-size: 0.7rem; margin-top: 5px; text-transform: uppercase; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; }
.v-pour .badge-vote { color: #27ae60; background: #eafaf1; }
.v-pour { border-bottom: 3px solid #27ae60; }
.v-contre .badge-vote { color: #c0392b; background: #fdedec; }
.v-contre { border-bottom: 3px solid #c0392b; }
.v-abstention .badge-vote { color: #727272; background: #fef9e7; }
.v-abstention { border-bottom: 3px solid #727272; }
.siege { font-size: 0.9rem; color: white; background-color: black; width: max-content; margin: 0px auto; padding: 3px 6px; border-radius: 10px; display: none; }

.table-responsive { display: block; width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.rank-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); }
.rank-table th {
    background: #f8f9fa; color: #666; text-align: left; padding: 15px;
    cursor: pointer; user-select: none; transition: background 0.2s;
}
.rank-table th:hover { background: #eee; color: #333; }
.rank-table td { padding: 12px 15px; border-bottom: 1px solid #eee; vertical-align: middle; }
.rank-num { font-weight: bold; color: #888; font-size: 1.1em; width: 50px; text-align: center; }
.depute-cell { display: flex; align-items: center; gap: 15px; }
.avatar-mini { width: 40px; height: 50px; object-fit: cover; border-radius: 4px; background: #eee; }
.name-link { font-weight: bold; color: #333; text-decoration: none; }
.progress-bg { width: 100%; background: #eee; height: 8px; border-radius: 4px; margin-top: 5px; overflow: hidden; }
.progress-bar { height: 100%; background: #3498db; border-radius: 4px; }
.score-text { font-weight: bold; color: #333; }
.sort-arrow { font-size: 0.8em; margin-left: 5px; opacity: 0.3; }
.th-sort-asc .sort-arrow { opacity: 1; }
.th-sort-desc .sort-arrow { opacity: 1; transform: rotate(180deg); display: inline-block; }

/* ==========================================================================
   10. HÉMICYCLE + TOOLBAR + TOOLTIPS (CORRECTIF ROBUSTE)
   ========================================================================== */
#hemicycle-view {
    width: 100%; max-width: 900px; margin: 0 auto; background: white; padding: 20px;
    border-radius: 8px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    display: flex; justify-content: center; align-items: center; min-height: 500px;
    position: relative;
}

/* --- CORRECTIF CURSEUR : Force la main sur TOUT le contenu du SVG --- */
/* On cible le conteneur et tous ses enfants directs SVG */
#hemicycle-svg,
#hemicycle-svg svg,
#hemicycle-svg g,
#hemicycle-svg circle,
#hemicycle-svg path,
.seat-item {
    cursor: pointer !important; /* Force absolue de la main */
    pointer-events: all !important; /* Force la détection de la souris */
}

/* Transition douce sur les sièges (Opacité et Contour) */
#hemicycle-svg circle, 
#hemicycle-svg path {
    transition: opacity 0.2s, stroke 0.2s;
}

@media (min-width: 1024px) {
    #hemicycle-svg circle:hover, 
    #hemicycle-svg path:hover {
        opacity: 0.8;
        stroke: #333;
        stroke-width: 2px;
    }
}

/* --- BOUTON TOGGLE (Style harmonisé et optimisé) --- */
.btn-toggle-hemi {
    background: #34495e; /* Utilisation de background générique */
    color: white;
    border: none;
    padding: 10px 25px;
    border-radius: 50px;
    font-size: 1rem;
    cursor: pointer;
    display: block;
    margin: 15px auto;
    width: fit-content;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    
    /* Optimisation pour forcer l'accélération matérielle */
    transition: all 0.3s ease;
    will-change: transform, background, box-shadow;
}

.btn-toggle-hemi:hover {
    background: #2c3e50; /* Changement de couleur */
    transform: translateY(-2px); /* Mouvement */
    box-shadow: 0 4px 10px rgba(0,0,0,0.15); /* Ombre */
    color: white; /* Force la couleur du texte */
}

.btn-toggle-hemi:active {
    transform: translateY(1px);
    box-shadow: 0 2px 3px rgba(0,0,0,0.1);
}

/* --- TOOLBAR HEMICYCLE --- */
.toolbar-hemi {
    background: #f9f9f9; padding: 10px; border-radius: 8px;
    display: flex; flex-wrap: wrap; gap: 20px;
    justify-content: center; align-items: center;
    margin-bottom: 15px; border: 1px solid #ddd;
}

.btn-group { display: flex; border-radius: 6px; overflow: hidden; border: 1px solid #aaa; }
.btn-mode {
    padding: 6px 12px; border: none; background: #fff; cursor: pointer;
    font-size: 0.9rem; border-right: 1px solid #aaa;
}
.btn-mode:last-child { border-right: none; }
.btn-mode.active { background: #34495e; color: #fff; }

.slider-wrapper { display: flex; flex-direction: column; gap: 3px; font-size: 0.8rem; min-width: 140px; }
.slider-row { display: flex; align-items: center; justify-content: space-between; }
.slider-row input { width: 80px; cursor: pointer; }

/* --- LÉGENDES --- */
.legend-hemi { display: flex; justify-content: center; gap: 15px; margin-top: 10px; flex-wrap: wrap; font-size: 0.9rem; align-items: center; }
.dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right:5px; }

.legend-circles { display: flex; align-items: flex-end; gap: 15px; height: 60px; justify-content: center; }
.circle-sample { border-radius: 50%; border: 1px solid #7f8c8d; display: inline-block; background: rgba(149, 165, 166, 0.5); margin-bottom: 2px; }
.legend-val { font-size: 0.8rem; color: #666; text-align: center; }

/* --- TOOLTIP HEMICYCLE --- */
.hemi-tooltip, #hemi-tooltip {
    position: fixed; display: none; background: white; border: 1px solid #ddd;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); padding: 10px;
    border-radius: 6px; z-index: 10000; pointer-events: none;
    min-width: 220px; font-size: 0.9rem; text-align: left; color: #333;
}

.hemi-tip-content { display: flex; align-items: flex-start; gap: 12px; }
.hemi-tip-content img {
    width: 50px; height: 65px; object-fit: cover;
    border-radius: 0 4px 4px 0; background: #f0f0f0; 
    border: 1px solid #eee; border-left: none;
}

/* Texte Compacté */
.hemi-tip-info { display: flex; flex-direction: column; line-height: 1.2; }
.hemi-tip-info strong { font-size: 1.05rem; margin-bottom: 2px; line-height: 1.1; }
.hemi-tip-info small { color: #888; margin-bottom: 4px; font-size: 0.85rem; line-height: 1.1; display: block; }
.hemi-tip-details { display: flex; flex-direction: column; gap: 0px; margin-top: 2px; line-height: 1; }
.hemi-tip-details div { font-weight: bold; }

/* Couleurs Votes */
.vote-val-pour { color: #27ae60; font-weight: bold; }
.vote-val-contre { color: #c0392b; font-weight: bold; }
.vote-val-abstention { color: #727272; font-weight: bold; }

/* ==========================================================================
   11. RESPONSIVE STANDARD
   ========================================================================== */
@media (max-width: 992px) {
    .liste-scrutins { grid-template-columns: repeat(2, 1fr); }
    .filters-bar, .filters-container {
        display: grid !important; grid-template-columns: repeat(3, 1fr); gap: 10px; align-items: center;
    }
    .filters-bar input[type="text"], .filters-bar input[type="search"],
    .filters-container input[type="text"], .search-full {
        grid-column: 1 / -1; width: 100%; margin-bottom: 5px;
    }
    .filters-bar select, .filters-container select { width: 100% !important; min-width: 0 !important; }
    #compteur-filtre, .count-badge { grid-column: 1 / -1; text-align: right; margin-bottom: 5px; }
}

@media (max-width: 768px) {
    .filters-row { flex-direction: column; align-items: stretch; }
}

/* ==========================================================================
   12. TO 15. (AUTRES SECTIONS)
   ========================================================================== */
.pagination-bar { display: flex; justify-content: center; align-items: center; gap: 15px; margin: 25px 0; }
.btn-page {
    display: inline-block; padding: 10px 20px; background-color: white;
    border: 1px solid #ddd; border-radius: 6px; color: #3498db;
    font-weight: bold; text-decoration: none; transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
.btn-page:hover { background-color: #f8f9fa; color: #2980b9; transform: translateY(-1px); }
.btn-page.disabled { opacity: 0.5; pointer-events: none; background-color: #f4f4f4; color: #999; }
.page-info { font-weight: bold; color: #555; font-size: 0.95em; }

.custom-tooltip {
    display: none; position: fixed; z-index: 10000; background: white;
    width: 280px; padding: 12px; border-radius: 8px; box-shadow: 0 5px 25px rgba(0, 0, 0, 0.25);
    border: 1px solid #ddd; pointer-events: none; font-family: 'Segoe UI', sans-serif;
    font-size: 13px; color: #333; line-height: 1.4;
}
.tip-header { display: flex; align-items: center; gap: 12px; padding-bottom: 8px; margin-bottom: 8px; border-bottom: 1px solid #eee; }
.tip-header img { width: 45px; height: 55px; object-fit: cover; border-radius: 4px; background: #f0f0f0; }
.tip-info h4 { margin: 0 0 2px 0; font-size: 1.1em; color: #2c3e50; }
.tip-info span { font-size: 0.9em; color: #7f8c8d; }
.tip-stats-box { background: #f9f9f9; border-radius: 6px; padding: 8px; margin-top: 5px; border: 1px solid #eee; }
.tip-stat-row { display: flex; align-items: center; margin-bottom: 4px; font-size: 0.85em; }
.tip-label { width: 50px; font-weight: bold; color: #555; }
.tip-track { flex: 1; height: 10px; background: #ddd; border-radius: 4px; overflow: hidden; margin: 0 8px; }
.tip-fill { height: 100%; border-radius: 4px; }
.tip-val { width: 35px; text-align: right; font-weight: bold; }

@media (max-width: 700px) {
    .custom-tooltip {
        position: fixed !important; top: 50% !important; left: 50% !important;
        transform: translate(-50%, -50%) !important; width: 80% !important; max-width: 300px;
    }
}

.main-footer { text-align: center; font-size: 0.9rem; color: #7f8c8d; }
.main-footer a { color: #3498db; text-decoration: none; font-weight: 600; }
.main-footer a:hover { text-decoration: underline; color: #2980b9; }

.stats-header { display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center; gap: 20px; }
.stat-card {
    background: white; padding: 10px 10px; border-radius: 8px; text-align: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); border: 1px solid #eee;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    width: 150px;
}
.stat-card>div:first-child { font-size: 0.95em; color: #7f8c8d; margin-bottom: 5px; }
.stat-big { font-size: 2em; font-weight: bold; color: #2c3e50; line-height: 1.2; }

.chart-wrapper {
    background: white; padding: 15px; border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); margin-bottom: 30px; position: relative; height: 600px;
}

/* ==========================================================================
   16. MODULE COMPARATEUR (GLOBAL / DESKTOP > 645px)
   ========================================================================== */
#comparateur-filters {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 20px !important;
}
#comparateur-filters .row-filters {
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 15px;
    border: none; margin: 0; padding: 0;
}
.comp-top-filters { display: flex; gap: 15px; justify-content: center; }
#selectors-area { width: 100%; text-align: center; }
#selectors-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }
.group-selector-item {
    display: flex; align-items: center; gap: 8px; background: #f8f9fa;
    padding: 6px; border-radius: 8px; border: 1px solid #eee; transition: all 0.3s;
    width: auto; min-width: 250px;
}
.group-selector-item:hover { border-color: #ddd; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); }

/* ==========================================================================
   17. RESPONSIVE COMPARATEUR (Overrides pour Tablette et Mobile)
   ========================================================================== */
@media (max-width: 645px) {
    .chart-container { padding: 10px; }
    .chart-label { width: 30%; font-size: 0.75em; padding-right: 5px; }
    .chart-bar-fill { font-size: 0.75em; padding-left: 5px; }

    #comparateur-filters { gap: 15px !important; }
    #comparateur-filters .row-filters { width: 100% !important; display: block !important; }
    
    .comp-top-filters { width: 100% !important; display: flex !important; gap: 10px !important; }
    .comp-filter-box { flex: 1 !important; width: 50% !important; min-width: 0 !important; }
    .comp-filter-box select { padding: 5px !important; }

    .comp-groups-grid {
        display: flex !important; flex-direction: row !important;
        flex-wrap: wrap !important; justify-content: center !important; gap: 10px !important;
    }
    .group-selector-item {
        width: 30% !important; min-width: 0 !important;
        justify-content: space-between; padding: 0 !important;
        background: transparent !important; border: none !important;
    }
    .comp-groups-grid .dynamic-select {
        width: 100% !important; height: 40px !important;
        background-color: #fff !important; border: 1px solid #ccc !important;
        border-radius: 6px !important; padding: 5px !important;
    }
    .comp-groups-grid .btn-remove {
        width: 20px !important; height: 20px !important;
        font-size: 1.2em !important; padding: 0 0 2px 0 !important;
        flex-shrink: 0; margin-left: 5px;
    }
}

@media (max-width: 600px) {
    .container { padding: 10px 5px; overflow-x: hidden; }

    .filters-bar, .filters-container {
        display: flex !important; flex-direction: column !important;
        align-items: stretch !important; gap: 10px; padding: 15px;
    }
    .filters-bar input, .search-full { grid-column: auto; width: 100%; }
    #compteur-filtre, .count-badge { width: 100%; text-align: center; justify-self: center; margin-top: 5px; }

    .group-selector-item { width: 100% !important; margin-bottom: 5px; }
    .comp-groups-grid .dynamic-select { height: 42px !important; padding: 10px !important; }
    .comp-groups-grid .btn-remove {
        width: 32px !important; height: 32px !important;
        font-size: 1.6em !important; margin-left: 10px;
    }

    .liste-scrutins { grid-template-columns: 1fr; }
    .header-scrutin { padding: 15px; }
    .header-select { width: 100%; max-width: none; }

    .stats-header {
        display: grid !important; grid-template-columns: repeat(3, 1fr) !important;
        gap: 5px !important; margin-bottom: 15px;
    }
    .stat-card {
        width: auto !important; padding: 8px 2px !important;
        display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 70px;
    }
    .stat-card > div:first-child {
        font-size: 0.65rem !important; line-height: 1.1; margin-bottom: 4px;
        white-space: normal; text-align: center; height: 24px;
        display: flex; align-items: center; justify-content: center;
    }
    .stat-big { font-size: 1.1rem !important; line-height: 1; }

    .rank-table th {
        font-size: 0.8rem !important; height: 50px !important;       
        vertical-align: middle !important; line-height: 1.2 !important; padding: 0 4px !important;
    }
    .rank-table th .sort-arrow, .rank-table th.hide-mobile .sort-arrow { display: none !important; }
    
    .rank-table th:first-child { text-align: center !important; width: 30px !important; }
    .rank-table th:nth-child(2) { text-align: left !important; padding-left: 10px !important; }
    .rank-table th.hide-mobile { text-align: left !important; padding-left: 4px !important; width: 60px !important; }
    .rank-table th:last-child { text-align: right !important; padding-right: 5px !important; }
    
    .rank-table td { padding: 6px 2px !important; font-size: 0.85em; vertical-align: middle; }
    .rank-num { width: 20px !important; font-size: 0.8em; padding-left: 2px !important; }
    .depute-cell { gap: 6px; }
    .avatar-mini { width: 30px; height: 38px; }
    .depute-cell .name-link { font-size: 0.9rem; line-height: 1.1; display: block; white-space: normal; }
    .depute-cell div[style*="color:#666"] { font-size: 0.7em !important; }

    .rank-table .hide-mobile, .cell-groupe {
        display: table-cell !important; width: 60px !important; max-width: 60px !important;
        text-align: left !important; line-height: 1; padding-left: 4px !important;
    }
    .rank-table .hide-mobile img, .cell-groupe img, .cell-groupe .grp-pastille, .cell-groupe .grp-logo { display: none !important; }
    .rank-table .hide-mobile span:not([style*="border-radius"]), .cell-groupe .grp-nom {
        display: block !important; font-size: 0.6rem !important;
        color: #555; white-space: normal; word-wrap: break-word; margin: 0;
    }

    .rank-table td:last-child { width: 50px !important; text-align: right; padding-right: 5px !important;}
    .rank-table td:last-child > div { justify-content: flex-end !important; }
    .rank-table .progress-bg, .rank-table .score-abs { display: none !important; }
    .rank-table .score-text { 
        display: block; font-size: 1.1rem !important; font-weight: 800; 
        color: #2c3e50; text-align: right !important; width: 100%;
    }
}